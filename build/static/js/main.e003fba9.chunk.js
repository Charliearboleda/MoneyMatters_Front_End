(this.webpackJsonpfront_end=this.webpackJsonpfront_end||[]).push([[0],{26:function(e,t,n){},28:function(e,t,n){},35:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n(20),c=n.n(r),s=(n(26),n(5)),o=n.n(s),u=n(4),l=n(9),i=n(10),b=(n(28),n(13)),j=n(2),m=n(11),p=n(1),h=function(e){var t=e.setAuth,n=Object(a.useState)({user_id:"",user_name:"",user_email:"",user_password:"",account_balance:""}),r=Object(i.a)(n,2),c=r[0],s=r[1],b=Object(a.useState)({user_id:"",user_name:"",user_email:"",user_password:"",account_balance:""}),j=Object(i.a)(b,2),h=j[0],d=j[1];function O(){return(O=Object(l.a)(o.a.mark((function e(){var t,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://money-managment-nyc.herokuapp.com/dashboard",{method:"GET",headers:{token:localStorage.token}});case 3:return t=e.sent,e.next=6,t.json();case 6:n=e.sent,s(n),d(n),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.error(e.t0.message);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})))).apply(this,arguments)}var f=function(){var e=Object(l.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),window.location.reload(!1),e.prev=2,e.next=5,d(Object(u.a)(Object(u.a)({},h),{},{account_balance:parseInt(c.account_balance)}));case 5:return n=c.user_id,console.log(JSON.stringify(h)),e.next=9,fetch("https://money-managment-nyc.herokuapp.com/auth/".concat(n),{method:"PUT",headers:{token:localStorage.token,"Content-Type":"application/json"},body:JSON.stringify(h)});case 9:e.sent,e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),console.error(e.t0.message);case 15:case"end":return e.stop()}}),e,null,[[2,12]])})));return function(t){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){!function(){O.apply(this,arguments)}()}),[]),Object(p.jsxs)(a.Fragment,{children:[Object(p.jsx)("div",{className:"button",children:Object(p.jsx)("button",{className:"btn btn-primary ",onClick:function(e){e.preventDefault(),localStorage.removeItem("token"),t(!1)},children:"Log Out"})}),Object(p.jsx)("div",{className:"header",children:Object(p.jsxs)("h1",{children:["Welcome, ",c.user_name]})}),Object(p.jsxs)("div",{className:"account",children:[Object(p.jsxs)("h3",{children:["Your Account Balance Is $",c.account_balance]}),Object(p.jsxs)("form",{onSubmit:f,name:c.user_id,children:[Object(p.jsx)("input",{type:"number",name:"account_balance",onChange:function(e){d(Object(u.a)(Object(u.a)({},h),{},Object(m.a)({},e.target.name,e.target.value)))}}),Object(p.jsx)("input",{className:"submit",type:"submit",onClick:f})]})]})]})},d=function(e){var t=e.setAuth,n=Object(a.useState)({user_email:"",user_password:""}),r=Object(i.a)(n,2),c=r[0],s=r[1],j=c.user_email,h=c.user_password,d=function(e){s(Object(u.a)(Object(u.a)({},c),{},Object(m.a)({},e.target.name,e.target.value)))},O=function(){var e=Object(l.a)(o.a.mark((function e(n){var a,r,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.prev=1,a={user_email:j,user_password:h},e.next=5,fetch("https://money-managment-nyc.herokuapp.com/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});case 5:return r=e.sent,e.next=8,r.json();case 8:c=e.sent,localStorage.setItem("token",c.token),t(!0),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),console.error(e.t0.message);case 16:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(t){return e.apply(this,arguments)}}();return Object(p.jsxs)(a.Fragment,{children:[Object(p.jsx)("h1",{className:"text-center my-5",children:"Login"}),Object(p.jsxs)("form",{onSubmit:O,children:[Object(p.jsx)("label",{htmlFor:"user_email",children:"Email"}),Object(p.jsx)("input",{type:"email",name:"user_email",className:"form-control my-3",value:j,onChange:function(e){return d(e)}}),Object(p.jsx)("label",{htmlFor:"user_password",children:"Password"}),Object(p.jsx)("input",{type:"password",name:"user_password",className:"form-control my-3",value:h,onChange:function(e){return d(e)}}),Object(p.jsx)("button",{className:"btn btn-success btn-block",children:"Log In"})]}),Object(p.jsx)(b.b,{to:"/register",children:"Sign Up"})]})},O=function(e){var t=e.setAuth,n=Object(a.useState)({user_name:"",user_email:"",user_password:"",account_balance:""}),r=Object(i.a)(n,2),c=r[0],s=r[1],j=c.user_name,h=c.user_email,d=c.user_password,O=c.account_balance,f=function(e){s(Object(u.a)(Object(u.a)({},c),{},Object(m.a)({},e.target.name,e.target.value)))},x=function(){var e=Object(l.a)(o.a.mark((function e(n){var a,r,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.prev=1,a={user_name:j,user_email:h,user_password:d,account_balance:O},e.next=5,fetch("https://money-managment-nyc.herokuapp.com/auth/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});case 5:return r=e.sent,e.next=8,r.json();case 8:c=e.sent,localStorage.setItem("token",c.token),t(!0),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),console.error(e.t0.message);case 16:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(t){return e.apply(this,arguments)}}();return Object(p.jsxs)(a.Fragment,{children:[Object(p.jsx)("h1",{className:"text-center my-5",children:"Register"}),Object(p.jsxs)("form",{onSubmit:x,children:[Object(p.jsx)("label",{htmlFor:"userName",children:"User Name "}),Object(p.jsx)("input",{type:"text",name:"user_name",placeholder:"name",className:"form-control my-3",value:j,onChange:function(e){return f(e)}}),Object(p.jsx)("label",{htmlFor:"email",children:"Email "}),Object(p.jsx)("input",{type:"email",name:"user_email",placeholder:"email",className:"form-control my-3",value:h,onChange:function(e){return f(e)}}),Object(p.jsx)("label",{htmlFor:"password",children:"Password "}),Object(p.jsx)("input",{type:"password",name:"user_password",placeholder:"password",className:"form-control my-3",value:d,onChange:function(e){return f(e)}}),Object(p.jsx)("label",{htmlFor:"accountBalance",children:"Account Balance $ "}),Object(p.jsx)("input",{type:"text",name:"account_balance",placeholder:"balance",className:"form-control my-3",value:O,onChange:function(e){return f(e)}}),Object(p.jsx)("button",{className:"btn btn-success btn-block",children:"Submit"})]}),Object(p.jsx)(b.b,{to:"/login",children:"Log In"})]})};var f=function(){var e=Object(a.useState)(!1),t=Object(i.a)(e,2),n=t[0],r=t[1],c=function(e){r(e)};function s(){return(s=Object(l.a)(o.a.mark((function e(){var t,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://money-managment-nyc.herokuapp.com/auth/is-verify",{method:"GET",headers:{token:localStorage.token}});case 3:return t=e.sent,e.next=6,t.json();case 6:n=e.sent,r(!0===n),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.error(e.t0.message);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}return Object(a.useEffect)((function(){!function(){s.apply(this,arguments)}()})),Object(p.jsx)(a.Fragment,{children:Object(p.jsx)(b.a,{children:Object(p.jsx)("div",{className:"container",children:Object(p.jsxs)(j.d,{children:[Object(p.jsx)(j.b,{exact:!0,path:"/login",render:function(e){return n?Object(p.jsx)(j.a,{to:"/dashboard"}):Object(p.jsx)(d,Object(u.a)(Object(u.a)({},e),{},{setAuth:c}))}}),Object(p.jsx)(j.b,{exact:!0,path:"/register",render:function(e){return n?Object(p.jsx)(j.a,{to:"/login"}):Object(p.jsx)(O,Object(u.a)(Object(u.a)({},e),{},{setAuth:c}))}}),Object(p.jsx)(j.b,{exact:!0,path:"/dashboard",render:function(e){return n?Object(p.jsx)(h,Object(u.a)(Object(u.a)({},e),{},{setAuth:c})):Object(p.jsx)(j.a,{to:"/login"})}})]})})})})};c.a.render(Object(p.jsx)(f,{}),document.getElementById("root"))}},[[35,1,2]]]);
//# sourceMappingURL=main.e003fba9.chunk.js.map